<div class="timelog-container">
  <!-- Summary Cards -->
  <div class="summary-cards">
    <div class="summary-card">
      <div class="card-icon">
        <i class="fas fa-users"></i>
      </div>
      <div class="card-content">
        <h3>Total Employees</h3>
        <p>{{ summaryStats.totalEmployees }}</p>
      </div>
    </div>

    <div class="summary-card">
      <div class="card-icon present">
        <i class="fas fa-user-check"></i>
      </div>
      <div class="card-content">
        <h3>Present Today</h3>
        <p>{{ summaryStats.presentToday }}</p>
      </div>
    </div>

    <div class="summary-card">
      <div class="card-icon late">
        <i class="fas fa-user-clock"></i>
      </div>
      <div class="card-content">
        <h3>Late Today</h3>
        <p>{{ summaryStats.lateToday }}</p>
      </div>
    </div>

    <div class="summary-card">
      <div class="card-icon absent">
        <i class="fas fa-user-times"></i>
      </div>
      <div class="card-content">
        <h3>Absent Today</h3>
        <p>{{ summaryStats.absentToday }}</p>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="content-section">
    <div class="header">
      <h1>Time Logs</h1>
      <button class="btn-add">
        <i class="fas fa-plus"></i>
        Add Time Entry
      </button>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="error-message">
      <i class="fas fa-exclamation-triangle"></i>
      {{ error }}
    </div>

    <!-- Filters -->
    <div class="filters">
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input 
          type="text" 
          placeholder="Search employee..." 
          [(ngModel)]="searchTerm"
          (input)="onSearchChange()">
      </div>

      <div class="date-filter">
        <label for="dateFilter">Date:</label>
        <input 
          type="date" 
          id="dateFilter"
          class="form-control" 
          [(ngModel)]="selectedDate"
          (change)="onDateChange()">
      </div>

      <div class="filter-buttons">
        <button 
          class="btn-filter" 
          [class.active]="selectedStatus === 'all'"
          (click)="selectedStatus = 'all'; onStatusChange()">
          All
        </button>
        <button 
          class="btn-filter" 
          [class.active]="selectedStatus === 'present'"
          (click)="selectedStatus = 'present'; onStatusChange()">
          Present
        </button>
        <button 
          class="btn-filter" 
          [class.active]="selectedStatus === 'late'"
          (click)="selectedStatus = 'late'; onStatusChange()">
          Late
        </button>
        <button 
          class="btn-filter" 
          [class.active]="selectedStatus === 'absent'"
          (click)="selectedStatus = 'absent'; onStatusChange()">
          Absent
        </button>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-state">
      <div class="spinner"></div>
      <p>Loading time logs...</p>
    </div>

    <!-- Time Entries Table -->
    <div *ngIf="!loading" class="timelog-table">
      <table>
        <thead>
          <tr>
            <th>Employee ID</th>
            <th>Date</th>
            <th>Check In Time</th>
            <th>Check Out Time</th>
            <th>Total Hours</th>
            <th>Status</th>
            <!-- <th>Session</th> -->
            <!-- <th>Actions</th> -->
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let entry of filteredTimeEntries">
            <td>{{ getEmployeeName(entry) }}</td>
            <td>{{ formatDate(entry.date) }}</td>
            <td>{{ formatTime(entry.checkInTime) }}</td>
            <td>
              <span *ngIf="isCheckedOut(entry); else notCheckedOut">
                {{ formatTime(entry.updatedAt) }}
              </span>
              <ng-template #notCheckedOut>
                <span class="not-checked-out">Not checked out</span>
              </ng-template>
            </td>
            <td>{{ getTotalHours(entry) }}</td>
            <td>
              <span class="status-badge" [ngClass]="getStatusClass(entry.status)">
                {{ getStatusText(entry.status) }}
              </span>
            </td>
            <!-- <td>{{ entry.sessionNumber }}</td> -->
            <!-- <td class="actions">
              <button class="btn-icon" title="Edit" [disabled]="!isCheckedOut(entry)">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn-icon" title="View Details">
                <i class="fas fa-eye"></i>
              </button>
              <button class="btn-icon delete" title="Delete">
                <i class="fas fa-trash"></i>
              </button>
            </td> -->
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && filteredTimeEntries.length === 0" class="empty-state">
      <i class="fas fa-inbox"></i>
      <p>No time logs found</p>
      <span>Try adjusting your filters or select a different date</span>
    </div>

    <!-- Pagination -->
    <div *ngIf="totalPages > 1 && !loading" class="pagination">
      <button 
        class="btn-page" 
        [disabled]="currentPage === 1"
        (click)="onPageChange(currentPage - 1)">
        <i class="fas fa-chevron-left"></i>
      </button>

      <button 
        *ngFor="let page of pages"
        class="btn-page" 
        [class.active]="page === currentPage"
        (click)="onPageChange(page)">
        {{ page }}
      </button>

      <button 
        class="btn-page" 
        [disabled]="currentPage === totalPages"
        (click)="onPageChange(currentPage + 1)">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>

    <!-- Pagination Info -->
    <div *ngIf="totalItems > 0" class="pagination-info">
      Showing {{ (currentPage - 1) * itemsPerPage + 1 }} to {{ Math.min(currentPage * itemsPerPage, totalItems) }} of {{ totalItems }} entries
    </div>
  </div>
</div>
